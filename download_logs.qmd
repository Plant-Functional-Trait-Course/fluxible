---
title: fluxible download logs
author: Joseph Gaudard
date: today
format: gfm
---

```{r}
#| label: packages
#| include: false
#| message: false

library(tidyverse)
library(adjustedcranlogs)
library(tidyverse)

date_end <- today() - 2
```

```{r}
#| label: fig-lastmonth
#| echo: false
#| fig-cap: "Number of downloads for the last month."
#| fig-height: 6
#| fig-width: 10
#| message: false

adj_cran_downloads(c("fluxible", "fluxfinder", "gasfluxes", "flux", "HMR", "licoread"), "last-month") |>
  pivot_longer(c(adjusted_downloads, adjusted_total_downloads)) |>
  ggplot(aes(date, value, color = package)) +
  geom_line(aes(linewidth = package)) +
  theme_bw() +
  facet_grid(name ~ ., scales = "free") +
  scale_linewidth_manual(values = c(rep(0.4, 2), 1, rep(0.4, 2), 1)) +
  labs(
    title = "Last month"
  )

```

```{r}
#| label: fig-paper
#| echo: false
#| fig-cap: "Number of downloads since paper was published."
#| fig-height: 6
#| fig-width: 10
#| message: false

adj_cran_downloads(c("fluxible", "fluxfinder", "gasfluxes", "flux", "HMR", "licoread"), from = "2025-09-25", to = date_end) |>
  pivot_longer(c(adjusted_downloads, adjusted_total_downloads)) |>
  ggplot(aes(date, value, color = package)) +
  geom_line(aes(linewidth = package)) +
  theme_bw() +
  facet_grid(name ~ ., scales = "free") +
  scale_linewidth_manual(values = c(rep(0.4, 2), 1, rep(0.4, 2), 1)) +
  labs(
    title = "Since paper publication"
  )

```

```{r}
#| label: fig-overall
#| echo: false
#| fig-cap: "Overall number of downloads since first CRAN acceptance."
#| fig-height: 6
#| fig-width: 10
#| message: false


adj_cran_downloads(c("fluxible", "fluxfinder", "gasfluxes", "flux", "HMR", "licoread"), from = "2024-08-27", to = date_end) |>
  pivot_longer(c(adjusted_downloads, adjusted_total_downloads)) |>
  ggplot(aes(date, value, color = package)) +
  geom_line(aes(linewidth = package)) +
  theme_bw() +
  facet_grid(name ~ ., scales = "free") +
  scale_linewidth_manual(values = c(rep(0.4, 2), 1, rep(0.4, 2), 1)) +
  labs(
    title = "Since first CRAN acceptance"
  )

```